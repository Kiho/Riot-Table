<!DOCTYPE html>
<html>
    <head>
        <title>Example table</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="bower_components/jquery/dist/jquery.min.js"></script>
        <script src="bower_components/underscore/underscore-min.js"></script>
        <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
   </head>
    <body>
        <div class="container">
            <div class="col-md-12">
                <h1 id="titre">Test Riot.js</h1>
                <div class="col-md-3">
                    <button id="refresh" onclick="chargeListe()">Refresh</button>
                    <button id="Start" onclick="startLecture()">DÃ©marrer</button>
                    <button id="Stop" onclick="stopLecture()">Stopper</button>
                </div>
                
                <div class="col-md-9">
                    <div class="col-md-4">
                        <button id="filtrer" onclick="filtrer()" >Filtrer</button>
                        <button id="annulerfiltrer" onclick="annulerfiltrer()" >Annuler filtre</button>
                    </div>
                    
                    <div class="col-md-5">
                        <p>Colonne : <input id="filtreColonne" type="text"/></p>
                        <p>Valeur : <input id="filtreValeur"  type="text"/></p>
                    </div>
                    
                </div>
                
                <div class="col-md-12">
                <matable id="tab2" data-id="table1" colExcluded="picture,address"><h2>Liste 1</h2></matable>
                </div>
            </div>
        </div>
       
        <script src="bower_components/riot/riot.js"></script>
        <script src="build/matable.js"  ></script>
        <script>
             var liste = [
                {nom: 'asterix', prenom:'marcel', categorie:'S1', rem:'aaaa 1', points:5, 'classe':'R'},
                {nom: 'obelix', prenom:'jules',categorie:'V1', rem:'bbbb 2', points:"1.2", 'classe':'A'},
                {nom: 'agecanonix', prenom:'david',categorie:'V2', rem:'ccccc 3', points:"1.16", 'classe':'J'},
                {nom: 'panoramix', prenom:'marc',categorie:'V1', rem:'ddddd 4', points:4, 'classe':'R'},
                {nom: 'idefix', prenom:'arthur',categorie:'V3', rem:'reeee 5', points:3.5, 'classe':'C'}
            ];           

            var maListe = monter();
             
            function startLecture() {
                 intervalID = setInterval(monter, 5000);
            }               

            function stopLecture() {
                clearInterval(intervalID);
            }    
       
            function monter() {
              return riot.mount("matable#tab2", {defaultSort:'age', styles: {colHeaderClass:"warning", activeLineClass:"danger"}});
            }
            
            function filtrer() {
                maListe[0].filtreCol = $('#filtreColonne').val();
                maListe[0].filtreVal = $('#filtreValeur').val();
                maListe[0].filtrer();
            }
       
            function annulerfiltrer() {
                maListe[0].filtreCol = '';
                maListe[0].filtrer();
            }       
       
            function chargeListe() {
                $.ajax({
                    url: "data/liste1.json",
                    async: true ,
                    dataType: 'json'
                })
                .done(function(data) {
                    maListe[0].start(data);
                 });
            }
            
            var startLecture = function () {
                this.intervalID = setInterval(chargeListe, 5000);
            };             

            var stopLecture = function () {
                clearInterval(this.intervalID);
            };            
            
        </script>
    </body>
</html>
